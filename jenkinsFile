pipeline{
agent any 
environment{
notifyEmail= "kajal.miglani@nagarro.com"
}
tools{
maven '3.9.4'
}
triggers {
cron('0 08 * * *')
}
stages
{
stage ('code preparation'){
steps{
bat "echo Preparing code"
}
}

stage ('code build'){
steps{
bat "mvn clean"
}
}
stage ('code test'){
steps{
bat "mvn test"
}
}

stage ('code Publish to Artifactory'){
steps{
rtMavenDeployer(
id:'deployer',
serverId: 'nagpJfrog@artifactory',
releaseRepo: 'RepoTest',
snapshotRepo: 'RepoTest'
)
rtMavenRun(
pom: 'pom.xml',
goals: 'clean install',
deployerId: 'deployer'
)
rtPublishBuildInfo(
serverId:'nagpJfrog@artifactory',
)

}
}
}
post
{
success{
bat"echo success"
}
}
}

